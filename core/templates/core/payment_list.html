
{% extends "base.html" %}

{% block content %}
<div class="content-header">
	<div class="container-fluid">
		<div class="row mb-2 align-items-center">
			<div class="col-sm-6 d-flex align-items-center">
				<i class="fas fa-money-check-alt fa-2x text-success mr-2"></i>
				<div>
					<h1 class="m-0">Payments <small class="text-muted" style="font-size:1rem;">List</small></h1>
				</div>
			</div>
			<div class="col-sm-6 text-right">
				<a href="{% url 'vendor_list' %}" class="btn btn-warning btn-sm">
					<i class="fas fa-plus"></i><span class="d-none d-sm-inline"> Add Payment</span>
				</a>
			</div>
		</div>
	</div>
</div>
<section class="content">
	<div class="container-fluid">
		<div class="card">
			<div class="card-body">
				<!-- Desktop Table View -->
				<table id="paymentsTable" class="table table-bordered table-striped d-none d-md-table">
					<thead>
						<tr>
							<th>Date</th>
							<th>Vendor</th>
							<th>Amount</th>
							<th>Method</th>
							<th>Memo</th>
						</tr>
					</thead>
					<tbody>
						{% for payment in payments %}
						<tr>
							<td>{{ payment.date|date:'d-M-y' }}</td>
							<td>{{ payment.vendor.name }}</td>
							<td>{{ payment.amount }}</td>
							<td>{{ payment.method }}</td>
							<td>
								{% if payment.memo %}
									<a href="{{ payment.memo.url }}" target="_blank" class="btn btn-xs btn-info" title="View Memo"><i class="fas fa-file"></i></a>
								{% else %}
									<span class="text-muted">-</span>
								{% endif %}
							</td>
						</tr>
						{% empty %}
						<tr><td colspan="5" class="text-center text-muted">No payments found.</td></tr>
						{% endfor %}
					</tbody>
				</table>
				<!-- Mobile Stack View -->
				<div class="d-md-none">
					{% for payment in payments %}
					<div class="card mb-2 shadow-sm payment-stack-card">
						<div class="card-body p-2">
							<div class="d-flex justify-content-between align-items-center mb-1">
								<span class="text-success font-weight-bold">{{ payment.date|date:'d-M-y' }}</span>
							</div>
							<div class="mb-1"><strong>Vendor:</strong> {{ payment.vendor.name }}</div>
							<div class="mb-1"><strong>Amount:</strong> à§³{{ payment.amount }}</div>
							<div class="mb-1"><strong>Method:</strong> {{ payment.method }}</div>
							<div class="mb-1"><strong>Memo:</strong> {% if payment.memo %}<a href="{{ payment.memo.url }}" target="_blank" class="btn btn-xs btn-info"><i class="fas fa-file"></i></a>{% else %}<span class="text-muted">-</span>{% endif %}</div>
						</div>
					</div>
					{% empty %}
					<div class="text-center text-muted">No payments found.</div>
					{% endfor %}
				</div>
<style>
/* Mobile stack card styles for S24 Ultra and similar */
@media (max-width: 600px) {
	.payment-stack-card {
		border-radius: 12px;
		font-size: 1.08rem;
		box-shadow: 0 2px 8px rgba(0,0,0,0.07);
	}
	.payment-stack-card .btn {
		font-size: 1rem;
		padding: 0.35rem 0.7rem;
	}
	.payment-stack-card strong {
		font-weight: 600;
	}
}
</style>
			</div>
		</div>
	</div>
</section>
<script>
$(function() {
	$('#paymentsTable').DataTable({
		responsive: true,
		pageLength: 25,
		order: [[0, 'desc']]
	});
});
</script>
{% endblock %}
